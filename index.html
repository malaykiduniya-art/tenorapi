<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Tenor API Proxy</title>
    <style>
        body { background: #000; margin: 0; display: flex; justify-content: center; align-items: center; height: 100vh; }
        img { max-width: 100vw; max-height: 100vh; object-fit: contain; }
    </style>
</head>
<body>
    <div id="output"></div>

    <script>
        async function fetchGif() {
            const params = new URLSearchParams(window.location.search);
            const tenorUrl = params.get('getgif');
            const output = document.getElementById('output');

            if (!tenorUrl) {
                output.innerHTML = "<p style='color:white'>Usage: ?getgif=URL</p>";
                return;
            }

            try {
                // Use AllOrigins to fetch the HTML content
                const proxy = "https://api.allorigins.win/get?url=";
                const response = await fetch(proxy + encodeURIComponent(tenorUrl));
                const data = await response.json();
                
                // Extract the direct gif link from the og:image meta tag
                const match = data.contents.match(/<meta[^>]+property="og:image"[^>]+content="([^"]+\.gif)"/i);
                
                if (match && match[1]) {
                    output.innerHTML = `<img src="${match[1]}" alt="GIF">`;
                } else {
                    output.innerHTML = "<p style='color:white'>Direct GIF URL not found.</p>";
                }
            } catch (err) {
                output.innerHTML = "<p style='color:white'>Error fetching via proxy.</p>";
            }
        }

        fetchGif();
    </script>
</body>
</html>
